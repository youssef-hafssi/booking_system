<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <defs>
    <style type="text/css"><![CDATA[
      .title { font: 700 22px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .subtitle { font: 600 16px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .text { font: 400 13px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .small { font: 400 12px 'Segoe UI', Arial, sans-serif; fill: #334155; }
      .box { fill: #ffffff; stroke: #334155; stroke-width: 2; rx: 12; }
      .box-muted { fill: #f8fafc; stroke: #cbd5e1; stroke-width: 1.5; rx: 10; }
      .box-dark { fill: #f1f5f9; stroke: #64748b; stroke-width: 1.8; rx: 10; }
      .accent { fill: #ffcb14; stroke: #eab308; stroke-width: 2; rx: 10; }
      .controller { fill: #e0f2fe; stroke: #0ea5e9; stroke-width: 2; rx: 10; }
      .service { fill: #dcfce7; stroke: #22c55e; stroke-width: 2; rx: 10; }
      .repo { fill: #fef9c3; stroke: #eab308; stroke-width: 2; rx: 10; }
      .model { fill: #fae8ff; stroke: #d946ef; stroke-width: 2; rx: 10; }
      .security { fill: #ffe4e6; stroke: #fb7185; stroke-width: 2; rx: 10; }
      .dto { fill: #f1f5f9; stroke: #64748b; stroke-width: 1.5; rx: 10; }
      .ext { fill: #eef2ff; stroke: #6366f1; stroke-width: 2; rx: 12; }
      .legend { fill: #ffffff; stroke: #94a3b8; stroke-width: 1.5; rx: 8; }
      .arrow { stroke: #334155; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead); }
      .arrow-accent { stroke: #0ea5e9; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-blue); }
      .arrow-green { stroke: #22c55e; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-green); }
      .arrow-orange { stroke: #eab308; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-orange); }
      .arrow-purple { stroke: #a855f7; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-purple); }
    ]]></style>

    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#334155" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0ea5e9" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#eab308" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#a855f7" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="36" text-anchor="middle" class="title">Architecture MVC - Workstation Booking System</text>
  <text x="700" y="60" text-anchor="middle" class="small">Front-end (React) + Back-end (Spring Boot) + Intégrations (DB, OpenAI/OpenRouter, SMTP)</text>

  <!-- Columns containers -->
  <rect x="30" y="80" width="380" height="780" class="box" />
  <text x="220" y="110" text-anchor="middle" class="subtitle">Vue (Frontend React)</text>

  <rect x="430" y="80" width="560" height="780" class="box" />
  <text x="710" y="110" text-anchor="middle" class="subtitle">Contrôleur • Service • Données (Spring Boot)</text>

  <rect x="1010" y="80" width="360" height="780" class="box" />
  <text x="1190" y="110" text-anchor="middle" class="subtitle">Systèmes Externes</text>

  <!-- Frontend details -->
  <rect x="50" y="140" width="340" height="130" class="box-muted" />
  <text x="70" y="170" class="subtitle">Pages &amp; Routes</text>
  <text x="70" y="195" class="text">- /login, /register</text>
  <text x="70" y="215" class="text">- /dashboard, /dashboard/admin</text>
  <text x="70" y="235" class="text">- /dashboard/workstations, /reservations</text>

  <rect x="50" y="290" width="340" height="110" class="box-muted" />
  <text x="70" y="320" class="subtitle">Context &amp; Auth</text>
  <text x="70" y="345" class="text">- AuthContext, ThemeContext</text>
  <text x="70" y="365" class="text">- ProtectedRoute (RBAC)</text>

  <rect x="50" y="420" width="340" height="200" class="box-muted" />
  <text x="70" y="450" class="subtitle">Services API</text>
  <text x="70" y="475" class="text">- api.js (base axios/fetch)</text>
  <text x="70" y="495" class="text">- aiBookingService.js</text>
  <text x="70" y="515" class="text">- analyticsService.js</text>
  <text x="70" y="535" class="text">- Appelle /api/... (JSON)</text>

  <rect x="50" y="640" width="340" height="190" class="box-muted" />
  <text x="70" y="670" class="subtitle">Composants UI</text>
  <text x="70" y="695" class="text">- components/ui/*</text>
  <text x="70" y="715" class="text">- pages/dashboard/*</text>
  <text x="70" y="735" class="text">- components/analytics/*</text>

  <!-- Backend: Security -->
  <rect x="450" y="140" width="520" height="90" class="security" />
  <text x="470" y="170" class="subtitle">Sécurité &amp; Config</text>
  <text x="470" y="195" class="text">- SecurityConfig, JwtAuthFilter, JwtUtils</text>
  <text x="880" y="195" class="text">- CORS, RBAC</text>

  <!-- Backend: Controllers -->
  <rect x="450" y="250" width="250" height="170" class="controller" />
  <text x="465" y="280" class="subtitle">Contrôleurs REST</text>
  <text x="465" y="305" class="text">- AuthController (/api/auth)</text>
  <text x="465" y="325" class="text">- Center/Room/WorkStation</text>
  <text x="465" y="345" class="text">- ReservationController</text>
  <text x="465" y="365" class="text">- AIBookingController (/api/ai)</text>

  <!-- Backend: DTO/Mapper -->
  <rect x="720" y="250" width="250" height="110" class="dto" />
  <text x="735" y="280" class="subtitle">DTO &amp; Mapper</text>
  <text x="735" y="305" class="text">- dto/*, mapper/*</text>
  <text x="735" y="325" class="text">- Validation (jakarta.validation)</text>

  <!-- Backend: Services -->
  <rect x="450" y="440" width="520" height="160" class="service" />
  <text x="470" y="470" class="subtitle">Services Métiers</text>
  <text x="470" y="495" class="text">- ReservationService, CenterService, RoomService</text>
  <text x="470" y="515" class="text">- AiRecommendationService, AIBookingSuggestionService</text>
  <text x="470" y="535" class="text">- NotificationService, AccessControlService</text>

  <!-- Backend: Repositories -->
  <rect x="450" y="620" width="520" height="120" class="repo" />
  <text x="470" y="650" class="subtitle">Dépôts (Spring Data JPA)</text>
  <text x="470" y="675" class="text">- UserRepository, ReservationRepository</text>
  <text x="470" y="695" class="text">- WorkStationRepository, RoomRepository, CenterRepository</text>

  <!-- Backend: Models -->
  <rect x="450" y="760" width="520" height="80" class="model" />
  <text x="470" y="790" class="subtitle">Modèles (Entités JPA)</text>
  <text x="470" y="815" class="text">- User, Center, Room, WorkStation, Reservation, etc.</text>

  <!-- External Systems -->
  <rect x="1030" y="150" width="320" height="180" class="ext" />
  <text x="1050" y="180" class="subtitle">Base de Données (MySQL)</text>
  <text x="1050" y="205" class="text">- spring.datasource.*</text>
  <text x="1050" y="225" class="text">- Hibernate, Flyway migrations</text>
  <text x="1050" y="245" class="text">- Entities ↔ Repositories</text>

  <rect x="1030" y="360" width="320" height="140" class="ext" />
  <text x="1050" y="390" class="subtitle">OpenAI (OpenRouter)</text>
  <text x="1050" y="415" class="text">- openai.api.url / key</text>
  <text x="1050" y="435" class="text">- AiRecommendationServiceImpl → REST</text>

  <rect x="1030" y="530" width="320" height="120" class="ext" />
  <text x="1050" y="560" class="subtitle">SMTP (Gmail)</text>
  <text x="1050" y="585" class="text">- spring.mail.*</text>
  <text x="1050" y="605" class="text">- NotificationService</text>

  <!-- Arrows: Frontend → Backend Security → Controllers -->
  <path class="arrow-accent" d="M390,470 C420,470 430,470 450,470" />
  <text x="325" y="460" class="small">HTTP(S) JSON</text>

  <path class="arrow" d="M710,230 C710,230 710,240 710,250" />
  <text x="720" y="225" class="small">JWT, RBAC</text>

  <path class="arrow-green" d="M575,420 C575,430 575,440 575,450" />
  <path class="arrow-green" d="M775,360 C770,400 760,430 710,440" />

  <!-- Controllers → Services -->
  <path class="arrow-green" d="M575,420 C640,420 660,430 700,440" />

  <!-- Services → Repositories -->
  <path class="arrow-orange" d="M710,600 C710,610 710,620 710,630" />

  <!-- Repositories → DB -->
  <path class="arrow" d="M970,680 C1000,680 1010,680 1030,660" />
  <text x="980" y="670" class="small">JPA</text>

  <!-- Services → OpenAI/OpenRouter -->
  <path class="arrow-purple" d="M970,500 C1000,500 1010,500 1030,460" />
  <text x="980" y="490" class="small">REST</text>

  <!-- Services → SMTP -->
  <path class="arrow" d="M930,560 C980,560 990,560 1030,580" />

  <!-- Legend -->
  <rect x="1040" y="680" width="300" height="160" class="legend" />
  <text x="1055" y="705" class="subtitle">Légende</text>
  <rect x="1050" y="720" width="16" height="16" class="controller" />
  <text x="1072" y="733" class="small">Contrôleurs REST</text>
  <rect x="1050" y="745" width="16" height="16" class="service" />
  <text x="1072" y="758" class="small">Services Métiers</text>
  <rect x="1050" y="770" width="16" height="16" class="repo" />
  <text x="1072" y="783" class="small">Dépôts (JPA)</text>
  <rect x="1210" y="720" width="16" height="16" class="model" />
  <text x="1232" y="733" class="small">Modèles (Entités)</text>
  <rect x="1210" y="745" width="16" height="16" class="security" />
  <text x="1232" y="758" class="small">Sécurité (JWT, RBAC)</text>
</svg> 