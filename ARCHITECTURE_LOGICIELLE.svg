<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="1000" viewBox="0 0 1600 1000">
  <defs>
    <style type="text/css"><![CDATA[
      .title { font: 700 24px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .subtitle { font: 600 16px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .text { font: 400 13px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .small { font: 400 12px 'Segoe UI', Arial, sans-serif; fill: #334155; }
      .box { fill: #ffffff; stroke: #334155; stroke-width: 2; rx: 12; }
      .box-muted { fill: #f8fafc; stroke: #cbd5e1; stroke-width: 1.5; rx: 10; }
      .section { fill: #f1f5f9; stroke: #64748b; stroke-width: 1.8; rx: 10; }
      .controller { fill: #e0f2fe; stroke: #0ea5e9; stroke-width: 2; rx: 10; }
      .service { fill: #dcfce7; stroke: #22c55e; stroke-width: 2; rx: 10; }
      .security { fill: #ffe4e6; stroke: #fb7185; stroke-width: 2; rx: 10; }
      .data { fill: #fde68a; stroke: #f59e0b; stroke-width: 2; rx: 10; }
      .ext { fill: #eef2ff; stroke: #6366f1; stroke-width: 2; rx: 12; }
      .obs { fill: #f5f3ff; stroke: #8b5cf6; stroke-width: 2; rx: 10; }
      .legend { fill: #ffffff; stroke: #94a3b8; stroke-width: 1.5; rx: 8; }
      .arrow { stroke: #334155; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead); }
      .arrow-blue { stroke: #0ea5e9; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-blue); }
      .arrow-green { stroke: #22c55e; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-green); }
      .arrow-orange { stroke: #f59e0b; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-orange); }
      .arrow-purple { stroke: #8b5cf6; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead-purple); }
    ]]></style>

    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#334155" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0ea5e9" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6" />
    </marker>
  </defs>

  <text x="800" y="36" text-anchor="middle" class="title">Architecture Logicielle - Workstation Booking System</text>
  <text x="800" y="60" text-anchor="middle" class="small">Vue d’ensemble des composants, flux et intégrations</text>

  <!-- Columns -->
  <rect x="30" y="90" width="360" height="860" class="box" />
  <text x="210" y="120" text-anchor="middle" class="subtitle">Clients</text>

  <rect x="410" y="90" width="780" height="860" class="box" />
  <text x="800" y="120" text-anchor="middle" class="subtitle">Application (Spring Boot Monolith)</text>

  <rect x="1210" y="90" width="360" height="860" class="box" />
  <text x="1390" y="120" text-anchor="middle" class="subtitle">Systèmes Externes</text>

  <!-- Clients -->
  <rect x="50" y="150" width="320" height="140" class="box-muted" />
  <text x="70" y="180" class="subtitle">Frontend React (SPA)</text>
  <text x="70" y="205" class="text">- Routes: /login, /register, /dashboard/*</text>
  <text x="70" y="225" class="text">- Contexts: AuthContext, ThemeContext</text>
  <text x="70" y="245" class="text">- ProtectedRoute (RBAC), Services API</text>

  <rect x="50" y="310" width="320" height="120" class="box-muted" />
  <text x="70" y="340" class="subtitle">Rôles Utilisateurs</text>
  <text x="70" y="365" class="text">- ADMIN, CENTER_MANAGER</text>
  <text x="70" y="385" class="text">- ASSET_MANAGER, PEDAGOGICAL_MANAGER</text>
  <text x="70" y="405" class="text">- STUDENT</text>

  <!-- Application: Security Layer -->
  <rect x="430" y="150" width="740" height="110" class="security" />
  <text x="450" y="180" class="subtitle">Couche Sécurité</text>
  <text x="450" y="205" class="text">- SecurityConfig, JwtAuthFilter, JwtUtils</text>
  <text x="900" y="205" class="text">- CORS, JWT, RBAC</text>

  <!-- Application: API Layer -->
  <rect x="430" y="280" width="360" height="170" class="controller" />
  <text x="450" y="310" class="subtitle">Couche API (REST)</text>
  <text x="450" y="335" class="text">- Auth, Users, Centers, Rooms, Workstations</text>
  <text x="450" y="355" class="text">- Reservations, Maintenance, Analytics</text>
  <text x="450" y="375" class="text">- AI Booking (/api/ai)</text>

  <!-- Application: DTO/Mapper -->
  <rect x="810" y="280" width="360" height="120" class="section" />
  <text x="830" y="310" class="subtitle">DTO &amp; Mapping</text>
  <text x="830" y="335" class="text">- dto/*, mapper/* (validation)</text>
  <text x="830" y="355" class="text">- Transformations Entrée/Sortie</text>

  <!-- Application: Services -->
  <rect x="430" y="470" width="740" height="200" class="service" />
  <text x="450" y="500" class="subtitle">Couche Services (métier)</text>
  <text x="450" y="525" class="text">- ReservationService, CenterService, RoomService</text>
  <text x="450" y="545" class="text">- AiRecommendationService, AIBookingSuggestionService</text>
  <text x="450" y="565" class="text">- NotificationService, AccessControlService</text>
  <text x="450" y="585" class="text">- Analytics/Reporting</text>

  <!-- Application: Data Access & Domain -->
  <rect x="430" y="690" width="360" height="150" class="data" />
  <text x="450" y="720" class="subtitle">Accès Données</text>
  <text x="450" y="745" class="text">- Repositories (Spring Data JPA)</text>
  <text x="450" y="765" class="text">- Hibernate, EntityManager</text>

  <rect x="810" y="690" width="360" height="150" class="section" />
  <text x="830" y="720" class="subtitle">Domaine &amp; Config</text>
  <text x="830" y="745" class="text">- Entités JPA (User, Center, Room, ...)</text>
  <text x="830" y="765" class="text">- Flyway Migrations, application.properties</text>

  <!-- Observability -->
  <rect x="430" y="860" width="740" height="70" class="obs" />
  <text x="450" y="890" class="subtitle">Observabilité &amp; Qualité</text>
  <text x="450" y="915" class="text">- Logging (SLF4J, levels), Exceptions (GlobalExceptionHandler)</text>

  <!-- External Systems -->
  <rect x="1230" y="150" width="320" height="170" class="ext" />
  <text x="1250" y="180" class="subtitle">Base de Données (MySQL)</text>
  <text x="1250" y="205" class="text">- JDBC URL, Hibernate</text>
  <text x="1250" y="225" class="text">- Persistency des entités</text>

  <rect x="1230" y="340" width="320" height="140" class="ext" />
  <text x="1250" y="370" class="subtitle">OpenAI (OpenRouter)</text>
  <text x="1250" y="395" class="text">- Recommandations IA</text>
  <text x="1250" y="415" class="text">- Appel REST sortant</text>

  <rect x="1230" y="500" width="320" height="120" class="ext" />
  <text x="1250" y="530" class="subtitle">SMTP (Gmail)</text>
  <text x="1250" y="555" class="text">- Notifications Email</text>

  <rect x="1230" y="640" width="320" height="120" class="ext" />
  <text x="1250" y="670" class="subtitle">Stockage Fichiers</text>
  <text x="1250" y="695" class="text">- uploads/workstations/*</text>

  <!-- Flows -->
  <path class="arrow-blue" d="M370,220 C400,220 420,220 430,205" />
  <text x="315" y="210" class="small">HTTP(S) JSON</text>

  <path class="arrow" d="M800,260 C800,260 800,270 800,280" />
  <text x="810" y="255" class="small">JWT &amp; RBAC</text>

  <path class="arrow-green" d="M610,450 C610,460 610,470 610,480" />
  <path class="arrow-green" d="M1030,395 C1000,430 960,460 900,470" />

  <path class="arrow-orange" d="M610,670 C610,680 610,690 610,700" />
  <path class="arrow-orange" d="M790,760 C980,760 1100,740 1230,660" />

  <path class="arrow-purple" d="M1170,560 C1200,560 1210,560 1230,560" />
  <path class="arrow-purple" d="M1170,420 C1200,420 1210,420 1230,410" />

  <!-- Legend -->
  <rect x="1230" y="780" width="320" height="170" class="legend" />
  <text x="1250" y="805" class="subtitle">Légende</text>
  <rect x="1250" y="820" width="16" height="16" class="controller" />
  <text x="1272" y="833" class="small">Couche API (Controllers)</text>
  <rect x="1250" y="845" width="16" height="16" class="service" />
  <text x="1272" y="858" class="small">Services Métiers</text>
  <rect x="1250" y="870" width="16" height="16" class="data" />
  <text x="1272" y="883" class="small">Accès Données</text>
  <rect x="1390" y="820" width="16" height="16" class="security" />
  <text x="1412" y="833" class="small">Sécurité</text>
  <rect x="1390" y="845" width="16" height="16" class="ext" />
  <text x="1412" y="858" class="small">Systèmes Externes</text>
  <rect x="1390" y="870" width="16" height="16" class="obs" />
  <text x="1412" y="883" class="small">Observabilité</text>
</svg> 